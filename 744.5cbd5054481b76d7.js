"use strict";(self.webpackChunkPAMWeb=self.webpackChunkPAMWeb||[]).push([[744],{4744:(Q,b,a)=>{a.r(b),a.d(b,{AuthModule:()=>E});var C=a(6895),p=a(9030),r=a(4006),y=a(1373),u=a.n(y),e=a(4650),m=a(2542),c=a(5938),g=a(8423),f=a(5593),h=a(1740),x=a(3425),v=a(7392);const d=function(){return{width:"100%"}};let Z=(()=>{class o{constructor(t,n,i,l){this._fb=t,this._authService=n,this.dialogRef=i,this.spinner=l,this.mainForm=this._fb.group({email:["",r.kI.required],password:["",r.kI.required],password_confirmation:["",r.kI.required]})}register(){const t=this.mainForm.get("email")?.value,n=this.mainForm.get("password")?.value,i=this.mainForm.get("password_confirmation")?.value;n===i?n.length<8||i.length<8?u()("\xa1Error!","Contrase\xf1a menor a 8 caracteres, ingresalas de nuevo","error"):(this.spinner.show(),this._authService.register(t,n).subscribe({next:l=>{u()("\xa1Felicidades!","\xa1Te has registrado con \xe9xito!","success"),this.dialogRef.close(),this.spinner.hide()},error:l=>{this.spinner.hide(),console.log(l),u()("\xa1Error!",l,"error")}})):u()("\xa1Error!","Contrase\xf1as diferentes, ingresalas de nuevo","error")}closeModal(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(m.e),e.Y36(c.so),e.Y36(g.t2))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sign-up"]],decls:31,vars:16,consts:[[1,"w-full","max-w-2xl","bg-white","rounded-lg"],[1,"p-4","my-6","text-center"],["mat-fab","","extended","",1,"absolute","top-5","left-5",3,"click"],[1,"my-4","text-3xl","font-bold"],[1,""],["autocomplete","off",1,"pb-4","mb-6",3,"formGroup","keydown.enter"],[1,"my-7"],[1,"w-11/12","max-w-xl","mx-auto","p-float-label"],["pInputText","","id","correo","formControlName","email","placeholder","aspirante@ufps.edu.co",1,"w-full"],["htmlFor","correo"],["formControlName","password",3,"toggleMask","feedback","inputStyle"],["for","contrase\xf1a"],[1,"my-6"],["formControlName","password_confirmation",3,"toggleMask","feedback","inputStyle"],[1,"flex","justify-end","w-11/12","max-w-xl","mx-auto","mt-8"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-scale-multiple",3,"fullScreen"],[2,"color","white"],["label","Registrarme","styleClass","p-button-danger",3,"onClick"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return n.closeModal()}),e.TgZ(3,"mat-icon"),e._uU(4,"clear"),e.qZA()(),e.TgZ(5,"h2",3),e._uU(6,"Registrate"),e.qZA(),e.TgZ(7,"span",4),e._uU(8,"Ingresa los siguientes datos e inicia el proceso de inscripci\xf3n"),e.qZA()(),e.TgZ(9,"div")(10,"form",5),e.NdJ("keydown.enter",function(){return n.register()}),e.TgZ(11,"div",6)(12,"span",7),e._UZ(13,"input",8),e.TgZ(14,"label",9),e._uU(15,"Correo"),e.qZA()()(),e.TgZ(16,"div",6)(17,"span",7),e._UZ(18,"p-password",10),e.TgZ(19,"label",11),e._uU(20,"Contrase\xf1a"),e.qZA()()(),e.TgZ(21,"div",12)(22,"span",7),e._UZ(23,"p-password",13),e.TgZ(24,"label",11),e._uU(25,"Confirmar contrase\xf1a"),e.qZA()()(),e.TgZ(26,"div",14)(27,"ngx-spinner",15)(28,"p",16),e._uU(29,"Cargando..."),e.qZA()(),e.TgZ(30,"p-button",17),e.NdJ("onClick",function(){return n.register()}),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",n.mainForm),e.xp6(8),e.Akn(e.DdM(12,d)),e.Q6J("toggleMask",!0)("feedback",!1)("inputStyle",e.DdM(13,d)),e.xp6(5),e.Akn(e.DdM(14,d)),e.Q6J("toggleMask",!0)("feedback",!1)("inputStyle",e.DdM(15,d)),e.xp6(4),e.Q6J("fullScreen",!0))},dependencies:[f.zx,h.o,x.ro,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.Ro,v.Hw],styles:[".modal-container[_ngcontent-%COMP%]{background-color:#0006}"]}),o})(),k=(()=>{class o{constructor(t,n,i){this.dialogRef=t,this._fb=n,this._authService=i,this.recoverForm=this._fb.group({email:["",[r.kI.required,r.kI.email]]})}recoverPass(){const t=this.recoverForm.get("email")?.value;this._authService.recoverPass(t).subscribe({next:n=>{this.dialogRef.close(),u()("\xa1Revisa tu email!","La contrase\xf1a nueva fue enviada para que puedas iniciar sesi\xf3n","success")},error:n=>{u()("\xa1Error!","Correo no registrado","error")}})}closeModal(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.so),e.Y36(r.qu),e.Y36(m.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-recovery-pass"]],decls:18,vars:1,consts:[[1,"w-full","max-w-xl","bg-white","rounded-lg"],[1,"p-4","my-6","text-center"],["mat-fab","","extended","",1,"absolute","top-5","left-5",3,"click"],[1,"my-4","text-3xl","font-bold"],[1,""],[1,"pb-4","mb-6",3,"formGroup"],[1,"my-7"],[1,"w-11/12","max-w-xl","mx-auto","p-float-label"],["formControlName","email","pInputText","","id","email","placeholder","aspirante@ufps.edu.co",1,"w-full"],["htmlFor","email"],[1,"flex","justify-center","w-11/12","max-w-xl","mx-auto","mt-8"],["label","Enviar Enlace","styleClass","p-button-danger",3,"onClick"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return n.closeModal()}),e.TgZ(3,"mat-icon"),e._uU(4,"clear"),e.qZA()(),e.TgZ(5,"h2",3),e._uU(6,"Recuperar Contrase\xf1a"),e.qZA(),e.TgZ(7,"span",4),e._uU(8,'Para restablecer su clave de usuario digite el correo con el que se registr\xf3 en el aplicativo. Al oprimir el bot\xf3n "Enviar enlace" se enviar\xe1 un correo con un enlace de recuperaci\xf3n. '),e.qZA()(),e.TgZ(9,"div")(10,"form",5)(11,"div",6)(12,"span",7),e._UZ(13,"input",8),e.TgZ(14,"label",9),e._uU(15,"Correo"),e.qZA()()(),e.TgZ(16,"div",10)(17,"p-button",11),e.NdJ("onClick",function(){return n.recoverPass()}),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",n.recoverForm))},dependencies:[f.zx,h.o,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,v.Hw],styles:[".modal-container[_ngcontent-%COMP%]{background-color:#0006}.input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3.5px #60a5fa4d}"]}),o})();var A=a(5226),F=a.n(A),S=a(1822),U=a(5060);function I(o,s){1&o&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Correo invalido."),e.qZA()())}function J(o,s){1&o&&(e.TgZ(0,"div",22)(1,"span"),e._uU(2,"Contrase\xf1a invalida."),e.qZA()())}const T=function(){return{width:"100%"}},R=[{path:"sign-in",children:[{path:"aspirante",component:(()=>{class o{constructor(t,n,i,l,D,j,q){this._router=t,this.dialog=n,this._authService=i,this._fb=l,this.jwlHelper=D,this.spinner=j,this._applicantService=q,this.dissabledLogin=!1,this.mainForm=this._fb.group({email:["",[r.kI.required,r.kI.email]],password:["",r.kI.required]})}userLogin(){const t=this.mainForm.get("email")?.value,n=this.mainForm.get("password")?.value;this.spinner.show(),this.dissabledLogin=!0,this.mainForm.controls.email.invalid?this.mainForm.markAllAsTouched():this._authService.login(t,n).subscribe({next:i=>{const l=this.jwlHelper.getRole();this.spinner.hide(),this._router.navigateByUrl(this.getNavigateUrl(l))},error:i=>{this.spinner.hide(),this.dissabledLogin=!1,console.log(i),F().fire({title:`${i.error.error}`,text:`${i.error.message}`,icon:"error",confirmButtonColor:"#007f5f",confirmButtonText:"Confirmar"})}})}openSignUpDialog(){this.dialog.open(Z).afterClosed().subscribe(n=>{})}openRecoverPassDialog(){this.dialog.open(k).afterClosed().subscribe(n=>{})}getNavigateUrl(t){return{USUARIO:"/inscription/aspirante",ADMIN:"/inscription/backlog/home",ENCARGADO:"/inscription/backlog/home"}[t]}redirectToCreditos(){window.location.href="../../../assets/creditos.html"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(c.uw),e.Y36(m.e),e.Y36(r.qu),e.Y36(S.T),e.Y36(g.t2),e.Y36(U.F))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sign-in"]],decls:30,vars:12,consts:[[1,"bodyLog"],["autocomplete","off",3,"formGroup","keydown.enter"],[1,"flex","justify-center","items-center","min-h-screen","md:w-3/4","md:mx-auto","xl:max-w-5xl"],[1,"rounded-md","bg-white","border"],[1,"py-10","px-6","bg-white","rounded-lg"],[1,"text-center","text-","text-red-400","font-roboto","md:m-auto"],[1,"text-2xl","font-bold"],[1,"my-7"],[1,"max-w-xl","mx-auto","p-float-label"],["pInputText","","id","email","placeholder","aspirante@ufps.edu.co","formControlName","email","autocomplete","off",1,"w-full"],["for","email"],["class","text-left",4,"ngIf"],[1,"w-full","max-w-xl","p-float-label"],["formControlName","password","autocomplete","off",3,"toggleMask","feedback","inputStyle"],["for","password"],[1,"mb-5"],[1,"pr-9","font-bold","cursor-pointer","hover:text-red-500","transition-colors",3,"disabled","click"],[1,"font-bold","cursor-pointer","hover:text-red-500","transition-colors",3,"disabled","click"],[1,"mb-15"],["label","Iniciar sesi\xf3n","styleClass","p-button-danger",1,"w-full","mb-15","mt-8","mx-7","md:mb-9",3,"onClick"],[2,"position","fixed","bottom","20px","left","20px"],[1,"bg-red-500","text-white","font-bold","px-4","py-2","rounded-lg",3,"click"],[1,"text-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("keydown.enter",function(){return n.userLogin()}),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6),e._uU(7,"\xa1Bienvenido!"),e.qZA(),e.TgZ(8,"div",7)(9,"span",8),e._UZ(10,"input",9),e.TgZ(11,"label",10),e._uU(12,"Correo"),e.qZA()(),e.YNc(13,I,3,0,"div",11),e.qZA(),e.TgZ(14,"div",7)(15,"span",12),e._UZ(16,"p-password",13),e.TgZ(17,"label",14),e._uU(18,"Contrase\xf1a"),e.qZA()(),e.YNc(19,J,3,0,"div",11),e.qZA(),e.TgZ(20,"div",15)(21,"button",16),e.NdJ("click",function(){return n.openSignUpDialog()}),e._uU(22,"\xbfNo tienes cuenta?"),e.qZA(),e.TgZ(23,"button",17),e.NdJ("click",function(){return n.openRecoverPassDialog()}),e._uU(24,"\xbfOlvidaste tu clave?"),e.qZA()(),e.TgZ(25,"div",18)(26,"p-button",19),e.NdJ("onClick",function(){return n.userLogin()}),e.qZA()()()()(),e.TgZ(27,"div",20)(28,"button",21),e.NdJ("click",function(){return n.redirectToCreditos()}),e._uU(29,"Cr\xe9ditos del aplicativo"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.mainForm),e.xp6(12),e.Q6J("ngIf",n.mainForm.controls.email.invalid&&n.mainForm.controls.email.touched),e.xp6(3),e.Akn(e.DdM(10,T)),e.Q6J("toggleMask",!0)("feedback",!1)("inputStyle",e.DdM(11,T)),e.xp6(3),e.Q6J("ngIf",n.mainForm.controls.password.invalid&&n.mainForm.controls.password.touched),e.xp6(2),e.Q6J("disabled",n.dissabledLogin),e.xp6(2),e.Q6J("disabled",n.dissabledLogin))},dependencies:[C.O5,f.zx,h.o,x.ro,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".bodyLog[_ngcontent-%COMP%]{background-image:url(ufpsbg.667ddfda5dbf7fdb.png);background-size:cover;background-repeat:no-repeat;background-position:center center;background-attachment:fixed}"]}),o})()}]},{path:"sign-up",children:[{path:"nuevo-aspirante",component:Z}]},{path:"**",redirectTo:"sign-in/aspirante"}];let _=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(R),p.Bz]}),o})();var M=a(8922),w=a(529);let N=(()=>{class o{intercept(t,n){return t=t.clone({withCredentials:!0}),n.handle(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var P=a(2843),Y=a(262);let L=(()=>{class o{intercept(t,n){return n.handle(t).pipe((0,Y.K)(i=>(0,P._)(i.error)))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),E=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[{provide:w.TP,useClass:N,multi:!0},{provide:w.TP,useClass:L,multi:!0}],imports:[C.ez,_,c.Is,M.m,v.Ps]}),o})()}}]);